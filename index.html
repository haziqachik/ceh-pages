<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CEH Practice Pages</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Poppins:wght@400;600&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --font:System-UI,Segoe UI,Roboto,Inter,Arial,sans-serif;
  --bg:#0b0d10; --bg-hi:#16202d; --panel:#0e1116;
  --text:#eaf1fb; --muted:#8a97a7; --border:#1f2530; --accent:#4fd1c5;
  --card1:#121821; --card2:#0f151c; --good:#4ade80; --bad:#f87171; --ring:#26b3a6;
}
body[data-theme="teal"]    {--accent:#4fd1c5; --ring:#26b3a6; --bg:#0b0d10; --bg-hi:#16202d;}
body[data-theme="purple"]  {--accent:#a78bfa; --ring:#8b5cf6; --bg:#0e0c14; --bg-hi:#201a35;}
body[data-theme="blue"]    {--accent:#60a5fa; --ring:#3b82f6; --bg:#0b0f14; --bg-hi:#152235;}
body[data-theme="rose"]    {--accent:#fb7185; --ring:#f43f5e; --bg:#140c0e; --bg-hi:#33161b;}
body[data-theme="amber"]   {--accent:#fbbf24; --ring:#f59e0b; --bg:#141008; --bg-hi:#2d2412;}
body[data-theme="emerald"] {--accent:#34d399; --ring:#10b981; --bg:#0a120e; --bg-hi:#162a20;}
body[data-theme="slate"]   {--accent:#94a3b8; --ring:#64748b; --bg:#0b0f13; --bg-hi:#1a232c;}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font:16px/1.5 var(--font); color:var(--text);
  background: radial-gradient(1200px 1200px at 10% -10%, var(--bg-hi) 0, var(--bg) 60%);
  display:flex; justify-content:center; align-items:flex-start; padding:24px;
}
.container{width:min(1000px,100%);}
.header{display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between; margin-bottom:16px;}
.title{font-size:20px; font-weight:600; letter-spacing:.3px}
.controls{display:flex; gap:10px; flex-wrap:wrap}
select,button,input{
  background:var(--panel); color:var(--text); border:1px solid var(--border);
  border-radius:10px; padding:8px 10px; outline:0;
}
button:hover, select:hover, input:hover{border-color:#2a3342}

.grid{display:grid; grid-template-columns:repeat(7,1fr); gap:10px; margin-top:10px}
@media (max-width:900px){ .grid{grid-template-columns:repeat(4,1fr)} }
@media (max-width:560px){ .grid{grid-template-columns:repeat(3,1fr)} }

.card{
  position:relative; background:linear-gradient(180deg,var(--card1),var(--card2));
  border:1px solid var(--border); border-radius:14px; padding:14px; aspect-ratio:1/1;
  display:flex; flex-direction:column; justify-content:space-between;
  cursor:pointer; transition:transform .08s ease, border-color .2s, box-shadow .2s;
}
.card:hover{ transform:translateY(-2px); border-color:#2a3342; box-shadow:0 6px 18px rgba(0,0,0,.35); }
.card h3{margin:0; font-size:18px; font-weight:600}
.range{color:var(--muted); font-size:12px}
.card.bookmarked{ box-shadow:0 0 0 2px var(--ring), 0 8px 24px rgba(0,0,0,.45); border-color:var(--ring); }

.panel{display:grid; gap:14px; grid-template-columns:1fr 1fr; margin-top:16px}
@media (max-width:900px){ .panel{grid-template-columns:1fr} }

.box{ background:linear-gradient(180deg,#11161e,#0f141b); border:1px solid var(--border); border-radius:14px; padding:14px; }
.box h4{margin:0 0 8px 0; font-weight:600}

.ready{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:10px; background:#0d131b; border:1px dashed #2a3342; user-select:none;}
.badge{display:inline-block; width:8px; height:8px; border-radius:999px; background:var(--accent); box-shadow:0 0 8px var(--accent)}
.timer{font-variant-numeric:tabular-nums; font-size:18px; margin-left:8px}
.status-ready{ color:var(--accent); }
.status-studying{ color:var(--good); }
.status-paused{ color:var(--bad); }

.small{font-size:12px; color:var(--muted)}
hr{border:0; border-top:1px solid var(--border); margin:10px 0}

.notes-toolbar{display:flex; gap:6px; flex-wrap:wrap; margin:6px 0 8px}
.note-tabs{display:flex; gap:6px; flex-wrap:wrap; margin-bottom:6px}
.note-tab{padding:6px 10px; border-radius:10px; border:1px solid var(--border); background:#0c1016; cursor:pointer; font-size:13px}
.note-tab.active{border-color:#2a3342; background:#0f151e}
.note-area{width:100%; min-height:180px; resize:vertical; background:#0b1016; color:var(--text); border:1px solid var(--border); border-radius:10px; padding:10px; outline:0;}
.danger{border-color:#3a1a1a; background:#191014}
.link{color:var(--accent); text-decoration:none; border-bottom:1px dashed var(--accent)}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="title">CEH Practice Pages</div>
    <div class="controls">
      <label class="small">Font:
        <select id="fontSel">
          <option value="System-UI,Segoe UI,Roboto,Inter,Arial,sans-serif">System</option>
          <option value="'Inter',System-UI,Segoe UI,Arial,sans-serif">Inter</option>
          <option value="'Roboto',System-UI,Segoe UI,Arial,sans-serif">Roboto</option>
          <option value="'Poppins',System-UI,Segoe UI,Arial,sans-serif">Poppins</option>
        </select>
      </label>
      <label class="small">Theme:
        <select id="themeSel">
          <option value="teal">Teal</option><option value="purple">Purple</option>
          <option value="blue">Blue</option><option value="rose">Rose</option>
          <option value="amber">Amber</option><option value="emerald">Emerald</option>
          <option value="slate">Slate</option>
        </select>
      </label>
      <label class="small">Bookmark:
        <input id="bm" type="number" min="1" max="7" style="width:70px" />
      </label>
    </div>
  </div>

  <!-- Pages grid -->
  <div class="grid" id="grid"></div>

  <div class="panel">
    <!-- Study box -->
    <div class="box" id="studyBox">
      <h4>Study Session</h4>
      <div class="ready" id="readyBtn">
        <span class="badge" id="badge"></span>
        <span id="readyText" class="status-ready">Ready to study!</span>
        <span class="timer" id="timer">00:00:00</span>
      </div>
      <div class="small" style="margin-top:8px">Click to start/pause. Time is saved locally. (R = start/pause, 0 = reset)</div>
    </div>

    <!-- Notes with tabs -->
    <div class="box" id="notesBox">
      <h4>Study Notes</h4>
      <div class="note-tabs" id="noteTabs"></div>
      <div class="notes-toolbar">
        <button id="addTab">Add</button>
        <button id="renameTab">Rename</button>
        <button id="deleteTab" class="danger">Delete</button>
      </div>
      <textarea id="noteArea" class="note-area" placeholder="Notes for this tab (auto-saves)"></textarea>
      <div class="small" id="saveInfo" style="margin-top:6px">Saved.</div>
    </div>
  </div>

  <hr>
  <div class="small">
    Educational, personal use. Pages 1–7 are saved copies; assets load from original folders when available.
    · <a class="link" href="https://github.com/haziqachik" target="_blank" rel="noopener">© haziqachik</a>
    · Last updated: <span id="lastUpdated"></span>
  </div>
</div>

<script>
// ---------- Config ----------
const totalPages = 7;
const questionRanges = {1:"Q1–50",2:"Q51–100",3:"Q101–150",4:"Q151–200",5:"Q201–250",6:"Q251–300",7:"Q301–302"};

// ---------- Pages grid ----------
const grid = document.getElementById('grid');
for (let i=1;i<=totalPages;i++){
  const card = document.createElement('div');
  card.className = 'card';
  card.dataset.page = i;
  card.innerHTML = `<div><h3>Page ${i}</h3><div class="range">${questionRanges[i]}</div></div>`;
  card.addEventListener('click',()=>openPage(i));
  grid.appendChild(card);
}

// Bookmark highlight
const bm = document.getElementById('bm');
function updateBookmarkHighlight(){
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('bookmarked'));
  const n = +bm.value; if(n>=1 && n<=totalPages){
    const el = document.querySelector(`.card[data-page="${n}"]`);
    if(el) el.classList.add('bookmarked');
  }
}
bm.value = localStorage.getItem('bookmark') || '';
bm.addEventListener('change', ()=>{ localStorage.setItem('bookmark', bm.value); updateBookmarkHighlight(); });
updateBookmarkHighlight();

// Open long/short page
async function openPage(n){
  const long = encodeURI(`312-50v13 Exam - Free Actual Q&As, Page ${n} _ ExamTopics.htm`);
  const short = `pages/${n}.html`;
  const okLong  = await fetch(long,  {method:'HEAD'}).then(r=>r.ok).catch(()=>false);
  if (okLong)  return location.href = long;
  const okShort = await fetch(short, {method:'HEAD'}).then(r=>r.ok).catch(()=>false);
  if (okShort) return location.href = short;
  alert('Page not found locally.');
}

// ---------- Font & Theme ----------
const root = document.documentElement;
const fontSel = document.getElementById('fontSel');
const themeSel = document.getElementById('themeSel');

fontSel.value = localStorage.getItem('fontSel') || fontSel.value;
root.style.setProperty('--font', fontSel.value);
fontSel.onchange = ()=>{ root.style.setProperty('--font', fontSel.value); localStorage.setItem('fontSel', fontSel.value); };

const savedTheme = localStorage.getItem('themeSel') || 'teal';
document.body.dataset.theme = savedTheme; themeSel.value = savedTheme;
themeSel.onchange = ()=>{ document.body.dataset.theme = themeSel.value; localStorage.setItem('themeSel', themeSel.value); };

// ---------- Timer ----------
const readyBtn  = document.getElementById('readyBtn');
const readyText = document.getElementById('readyText');
const timerEl   = document.getElementById('timer');
const badge     = document.getElementById('badge');

let startTs = +localStorage.getItem('timer_start') || 0;
let elapsed = +localStorage.getItem('timer_elapsed') || 0;
let ticking = false, rafId=0;

function fmt(s){const h=String(Math.floor(s/3600)).padStart(2,'0'), m=String(Math.floor(s%3600/60)).padStart(2,'0'), sec=String(Math.floor(s%60)).padStart(2,'0'); return `${h}:${m}:${sec}`;}
function paint(){const now=Date.now(); const secs = elapsed + (ticking ? (now - startTs)/1000 : 0); timerEl.textContent = fmt(secs); rafId = requestAnimationFrame(paint);}
function setStatus(cls, text, color){
  readyText.className = cls; readyText.textContent = text;
  const c = color || getComputedStyle(root).getPropertyValue('--accent'); badge.style.background=c; badge.style.boxShadow=`0 0 8px ${c}`;
}
function start(){ if(ticking) return; ticking=true; startTs=Date.now(); localStorage.setItem('timer_start', startTs); setStatus('status-studying','Studying', getComputedStyle(root).getPropertyValue('--good')); }
function pause(){ if(!ticking) return; ticking=false; elapsed += (Date.now()-startTs)/1000; localStorage.setItem('timer_elapsed', elapsed); localStorage.removeItem('timer_start'); setStatus('status-paused','Paused', getComputedStyle(root).getPropertyValue('--bad')); }
function reset(){ ticking=false; elapsed=0; localStorage.removeItem('timer_start'); localStorage.setItem('timer_elapsed',0); setStatus('status-ready','Ready to study!',''); }

readyBtn.addEventListener('click', ()=> ticking ? pause() : start());
document.addEventListener('keydown', e=>{ if(e.key.toLowerCase()==='r') (ticking? pause(): start()); if(e.key==='0') reset(); });

if (startTs) ticking=true, setStatus('status-studying','Studying', getComputedStyle(root).getPropertyValue('--good'));
else if (elapsed) setStatus('status-paused','Paused', getComputedStyle(root).getPropertyValue('--bad'));
else setStatus('status-ready','Ready to study!','');
paint();

// ---------- Notes with tabs ----------
const TABS_KEY='note_tabs', ACTIVE_KEY='note_active', NOTE_KEY=(n)=>`note_${n}`;
const tabsEl = document.getElementById('noteTabs');
const area   = document.getElementById('noteArea');
const saveInfo=document.getElementById('saveInfo');
const addBtn = document.getElementById('addTab');
const renBtn = document.getElementById('renameTab');
const delBtn = document.getElementById('deleteTab');

function loadTabs(){ try{ const t=JSON.parse(localStorage.getItem(TABS_KEY)||'[]'); return Array.isArray(t)&&t.length?t:['General','Page 1','Page 2','Page 3']; }catch{ return ['General','Page 1','Page 2','Page 3']; } }
function saveTabs(t){ localStorage.setItem(TABS_KEY, JSON.stringify(t)); }
let tabs = loadTabs();
let active = localStorage.getItem(ACTIVE_KEY) || tabs[0];

function renderTabs(){
  tabsEl.innerHTML='';
  tabs.forEach(name=>{
    const b=document.createElement('button');
    b.className='note-tab'+(name===active?' active':'');
    b.textContent=name;
    b.title='Right-click to rename';
    b.onclick=()=>{ active=name; localStorage.setItem(ACTIVE_KEY,active); loadNote(); renderTabs(); };
    b.oncontextmenu=(e)=>{ e.preventDefault(); const nn=prompt('Rename tab', name); if(!nn) return; const i=tabs.indexOf(name); tabs[i]=nn; if(active===name) active=nn; saveTabs(tabs); localStorage.setItem(ACTIVE_KEY,active); renderTabs(); loadNote(); };
    tabsEl.appendChild(b);
  });
}
function loadNote(){ area.value = localStorage.getItem(NOTE_KEY(active)) || ''; saveInfo.textContent='Loaded "'+active+'"'; }
let saveTO;
area.addEventListener('input', ()=>{ clearTimeout(saveTO); saveTO=setTimeout(()=>{ localStorage.setItem(NOTE_KEY(active), area.value); saveInfo.textContent='Saved '+new Date().toLocaleTimeString(); }, 300); });

addBtn.onclick=()=>{ const nn=prompt('New tab name'); if(!nn) return; tabs.push(nn); saveTabs(tabs); active=nn; localStorage.setItem(ACTIVE_KEY,active); renderTabs(); loadNote(); };
renBtn.onclick=()=>{ const nn=prompt('Rename tab', active); if(!nn) return; const i=tabs.indexOf(active); tabs[i]=nn; active=nn; saveTabs(tabs); localStorage.setItem(ACTIVE_KEY,active); renderTabs(); loadNote(); };
delBtn.onclick=()=>{ if(!confirm(`Delete "${active}"? Notes in this tab will be removed from this browser.`)) return; localStorage.removeItem(NOTE_KEY(active)); tabs=tabs.filter(t=>t!==active); if(!tabs.length) tabs=['General']; active=tabs[0]; saveTabs(tabs); localStorage.setItem(ACTIVE_KEY,active); renderTabs(); loadNote(); };

renderTabs(); loadNote();

// ---------- Footer date ----------
(function(){
  const e=document.getElementById('lastUpdated');
  const d=document.lastModified || new Date().toLocaleString();
  e.textContent = d;
})();
</script>
</body>
</html>
