<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>CEH Practice Pages</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --font:'Inter',system-ui,Segoe UI,Arial,sans-serif;
  --bg:#0b0d10; --panel:#0e1218; --card:#12161f;
  --text:#eaf1fb; --muted:#8a97a7; --border:#1c2330; --accent:#44d1c5;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; background:#0b0d10; color:var(--text); font:16px/1.5 var(--font);}
.container{max-width:1080px; margin:0 auto; padding:22px}
.header{display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between; margin-bottom:16px}
.title{font-weight:700; letter-spacing:.2px; font-size:22px}
.controls{display:flex; gap:10px; flex-wrap:wrap}
label.small{font-size:12px; color:var(--muted); display:flex; align-items:center; gap:6px}
select,input,button{background:#0d1117; color:var(--text); border:1px solid var(--border); border-radius:10px; padding:8px 10px; outline:0}
button:hover,select:hover,input:hover{border-color:#263346}
.grid{display:grid; grid-template-columns:repeat(7,1fr); gap:12px; margin-top:10px}
@media (max-width:980px){.grid{grid-template-columns:repeat(4,1fr)}}
@media (max-width:560px){.grid{grid-template-columns:repeat(3,1fr)}}
.card{
  background:linear-gradient(180deg,var(--card),#0f141c);
  border:1px solid var(--border); border-radius:14px; padding:14px; aspect-ratio:1/1;
  display:flex; flex-direction:column; justify-content:space-between; cursor:pointer;
  transition:transform .08s ease, border-color .2s ease, box-shadow .2s ease;
}
.card:hover{ transform:translateY(-2px); border-color:#2a3448; box-shadow:0 8px 24px rgba(0,0,0,.35); }
.card.bookmarked{ box-shadow:0 0 0 2px var(--accent) inset, 0 0 18px rgba(68,209,197,.25); }
.card h3{margin:0; font-size:18px; font-weight:700}
.range{color:var(--muted); font-size:12px}
.panel{display:grid; gap:14px; grid-template-columns:1fr 1fr; margin-top:16px}
@media (max-width:900px){ .panel{grid-template-columns:1fr} }
.box{background:linear-gradient(180deg,#11161f,#0e141b); border:1px solid var(--border); border-radius:14px; padding:14px}
.box h4{margin:0 0 8px 0; font-weight:700}
.ready{display:inline-flex; align-items:center; gap:10px; padding:10px 12px; border-radius:12px; border:1px dashed #2a3342; background:#0d131b; user-select:none; cursor:pointer}
.badge{width:9px;height:9px;border-radius:9999px;box-shadow:0 0 8px var(--badge);background:var(--badge)}
.badge.ready{--badge:#8391a7}
.badge.study{--badge:#2dd36f}
.badge.pause{--badge:#ff5d5d}
.timer{font-variant-numeric:tabular-nums; font-size:18px}
.small{font-size:12px; color:var(--muted)}
.notes-wrap{display:flex; flex-direction:column; gap:8px}
.notes-tabs{display:flex; gap:6px; flex-wrap:wrap}
.tab{padding:6px 10px; border-radius:10px; border:1px solid var(--border); background:#0c1118; cursor:pointer; font-size:13px}
.tab.active{border-color:#2a3342; background:#0f151f}
.addtab{padding:6px 10px; border-radius:10px; border:1px dashed #2a3342; background:#0c1118; cursor:pointer; font-size:13px}
textarea{width:100%; min-height:200px; resize:vertical; background:#0b1016; color:var(--text); border:1px solid var(--border); border-radius:12px; padding:10px}
hr{border:0; border-top:1px solid var(--border); margin:12px 0}
.cursor-dot{position:fixed; pointer-events:none; width:6px; height:6px; border-radius:50%; background:var(--accent); opacity:.75; transform:translate(-50%,-50%); animation:fade .6s ease-out forwards}
@keyframes fade{to{opacity:0; transform:translate(-50%,-50%) scale(.5)}}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="title">CEH Practice Pages</div>
    <div class="controls">
      <label class="small">Font:
        <select id="fontSel">
          <option value="'Inter',system-ui,Segoe UI,Arial,sans-serif">Inter</option>
          <option value="system-ui,Segoe UI,Arial,sans-serif">System</option>
        </select>
      </label>
      <label class="small">Theme:
        <select id="themeSel">
          <option value="teal">Default (Teal)</option>
          <option value="purple">Purple</option>
          <option value="blue">Blue</option>
          <option value="rose">Rose</option>
          <option value="gray">Gray</option>
          <option value="olive">Olive</option>
        </select>
      </label>
      <label class="small">Cursor:
        <select id="cursorSel">
          <option value="on">Comet</option>
          <option value="off">Static</option>
        </select>
      </label>
      <label class="small">Bookmark:
        <input id="bm" type="number" min="1" max="7" style="width:70px"/>
      </label>
    </div>
  </div>

  <div class="grid" id="grid"></div>

  <div class="panel">
    <div class="box">
      <h4>Study Session</h4>
      <div id="readyBtn" class="ready">
        <span id="stateDot" class="badge ready"></span>
        <span id="stateText">Ready</span>
        <span class="timer" id="timer">00:00:00</span>
      </div>
      <div class="small" style="margin-top:8px">Click to start/pause. Time saves locally. Tip: <b>R</b> start/pause, <b>0</b> reset.</div>
      <hr/>
      <div style="min-height:160px; opacity:.65"> </div>
    </div>

    <div class="box">
      <h4>Study Notes</h4>
      <div class="notes-wrap">
        <div id="tabs" class="notes-tabs"></div>
        <textarea id="notes" placeholder="Write notes…"></textarea>
        <div id="savedInfo" class="small">Loaded.</div>
      </div>
    </div>
  </div>

  <hr/>
  <div class="small">Personal study project — educational use only. Pages 1–7 are saved copies; assets load from original folders.</div>
</div>

<script>
/* ---------- THEMES ---------- */
const THEMES={
  teal:  {accent:'#44d1c5', bg:'#0b0d10', panel:'#0e1218', card:'#12161f', border:'#1c2330', text:'#eaf1fb', muted:'#8a97a7'},
  purple:{accent:'#a78bfa', bg:'#0b0b12', panel:'#111222', card:'#16152a', border:'#201f35', text:'#efeaff', muted:'#9aa0c3'},
  blue:  {accent:'#60a5fa', bg:'#0a0e14', panel:'#0f1520', card:'#121a27', border:'#182334', text:'#e8f0ff', muted:'#96a6c3'},
  rose:  {accent:'#fb7185', bg:'#130b0d', panel:'#1a0f13', card:'#20141a', border:'#2a1a22', text:'#ffeef1', muted:'#cfa4ac'},
  gray:  {accent:'#a3a3a3', bg:'#0d0f12', panel:'#121418', card:'#171a1f', border:'#20242b', text:'#e6e7ea', muted:'#9aa3ad'},
  olive: {accent:'#a3d07a', bg:'#0b0f0b', panel:'#111511', card:'#151b15', border:'#1e261e', text:'#ecf6e9', muted:'#9fb49e'},
};
function applyTheme(name){
  const t=THEMES[name]||THEMES.teal, r=document.documentElement;
  r.style.setProperty('--accent', t.accent);
  r.style.setProperty('--bg', t.bg);
  r.style.setProperty('--panel', t.panel);
  r.style.setProperty('--card', t.card);
  r.style.setProperty('--border', t.border);
  r.style.setProperty('--text', t.text);
  r.style.setProperty('--muted', t.muted);
  document.body.style.background=t.bg;
  localStorage.setItem('theme', name);
}

/* ---------- BUILD GRID ---------- */
const questionRanges={1:"Q1-50",2:"Q51-100",3:"Q101-150",4:"Q151-200",5:"Q201-250",6:"Q251-300",7:"Q301-302"};
const grid=document.getElementById('grid');
for(let i=1;i<=7;i++){
  const c=document.createElement('div');
  c.className='card'; c.dataset.page=i;
  c.innerHTML=`<div><h3>Page ${i}</h3><div class="range">${questionRanges[i]}</div></div>`;
  c.addEventListener('click',()=>openPage(i));
  grid.appendChild(c);
}

/* ---------- OPEN PAGE (long first, then short) ---------- */
async function openPage(n){
  const long = encodeURI(`312-50v13 Exam - Free Actual Q&As, Page ${n} _ ExamTopics.htm`);
  const short = `pages/${n}.html`;
  const okLong = await fetch(long,{method:'HEAD'}).then(r=>r.ok).catch(()=>false);
  if(okLong){ location.href=long; return; }
  const okShort = await fetch(short,{method:'HEAD'}).then(r=>r.ok).catch(()=>false);
  if(okShort){ location.href=short; return; }
  alert(`Page ${n} not found (long and short filenames missing).`);
}

/* ---------- BOOKMARK ---------- */
const bm=document.getElementById('bm');
function paintBookmark(){
  document.querySelectorAll('.card').forEach(el=>el.classList.remove('bookmarked'));
  const v=+bm.value||0; if(v>=1 && v<=7){
    const el=document.querySelector(`.card[data-page="${v}"]`);
    if(el) el.classList.add('bookmarked');
  }
}
bm.value = localStorage.getItem('bookmark') || '';
bm.addEventListener('change',()=>{ localStorage.setItem('bookmark', bm.value); paintBookmark(); });
paintBookmark();

/* ---------- FONT/CURSOR ---------- */
const fontSel=document.getElementById('fontSel');
fontSel.value = localStorage.getItem('fontSel') || fontSel.value;
document.documentElement.style.setProperty('--font', fontSel.value);
fontSel.onchange=()=>{localStorage.setItem('fontSel',fontSel.value); document.documentElement.style.setProperty('--font', fontSel.value);};

const themeSel=document.getElementById('themeSel');
themeSel.value = localStorage.getItem('theme') || 'teal';
applyTheme(themeSel.value);
themeSel.onchange=()=>applyTheme(themeSel.value);

const cursorSel=document.getElementById('cursorSel');
cursorSel.value = localStorage.getItem('cursorSel') || 'on';
cursorSel.onchange=()=>localStorage.setItem('cursorSel',cursorSel.value);
let lastDot=0; window.addEventListener('mousemove',e=>{
  if(cursorSel.value==='off') return;
  const now=performance.now(); if(now-lastDot<18) return; lastDot=now;
  const d=document.createElement('div'); d.className='cursor-dot';
  d.style.left=e.clientX+'px'; d.style.top=e.clientY+'px';
  document.body.appendChild(d); setTimeout(()=>d.remove(),600);
});

/* ---------- TIMER ---------- */
const btn=document.getElementById('readyBtn'), dot=document.getElementById('stateDot'), txt=document.getElementById('stateText'), tEl=document.getElementById('timer');
let ticking=false, startTs=+localStorage.getItem('timer_start')||0, elapsed=+localStorage.getItem('timer_elapsed')||0;
if(startTs){ ticking=true; txt.textContent='Studying'; dot.className='badge study'; }
function fmt(s){const h=String(Math.floor(s/3600)).padStart(2,'0'), m=String(Math.floor(s%3600/60)).padStart(2,'0'), sec=String(Math.floor(s%60)).padStart(2,'0'); return `${h}:${m}:${sec}`;}
function paint(){ const now=Date.now(); const s=elapsed+(ticking? (now-startTs)/1000:0); tEl.textContent=fmt(s); requestAnimationFrame(paint); }
paint();
function start(){ if(ticking) return; ticking=true; startTs=Date.now(); localStorage.setItem('timer_start',startTs); txt.textContent='Studying'; dot.className='badge study'; }
function pause(){ if(!ticking) return; ticking=false; elapsed+=(Date.now()-startTs)/1000; localStorage.setItem('timer_elapsed',elapsed); localStorage.removeItem('timer_start'); txt.textContent='Paused'; dot.className='badge pause'; }
function reset(){ ticking=false; startTs=0; elapsed=0; localStorage.removeItem('timer_start'); localStorage.setItem('timer_elapsed',0); txt.textContent='Ready'; dot.className='badge ready'; }
btn.addEventListener('click',()=> ticking ? pause() : start());
document.addEventListener('keydown',e=>{ if(e.key.toLowerCase()==='r') (ticking?pause():start()); if(e.key==='0') reset();});

/* ---------- NOTES (tabs) ---------- */
const tabsEl=document.getElementById('tabs'), notes=document.getElementById('notes'), savedInfo=document.getElementById('savedInfo');
function loadTabs(){ let t=JSON.parse(localStorage.getItem('note_tabs')||'[]'); if(!t.length) t=['General','Page1','Page2','Page3']; return t; }
function saveTabs(t){ localStorage.setItem('note_tabs', JSON.stringify(t)); }
let tabs=loadTabs(); let active = localStorage.getItem('note_active') || tabs[0];
function keyFor(n){ return 'note_'+n; }
function renderTabs(){
  tabsEl.innerHTML='';
  tabs.forEach(name=>{
    const b=document.createElement('button');
    b.className='tab'+(name===active?' active':''); b.textContent=name; b.title='Right-click to rename';
    b.onclick=()=>{active=name; localStorage.setItem('note_active',active); loadNote(); renderTabs();};
    b.oncontextmenu=(ev)=>{ev.preventDefault(); const nn=prompt('Rename tab',name); if(!nn) return; const i=tabs.indexOf(name); tabs[i]=nn; if(active===name) active=nn; saveTabs(tabs); localStorage.setItem('note_active',active); renderTabs(); loadNote();};
    tabsEl.appendChild(b);
  });
  const add=document.createElement('button'); add.className='addtab'; add.textContent='+ Add';
  add.onclick=()=>{ const nn=prompt('New tab name'); if(!nn) return; tabs.push(nn); saveTabs(tabs); active=nn; localStorage.setItem('note_active',active); renderTabs(); loadNote(); };
  tabsEl.appendChild(add);
}
function loadNote(){ notes.value = localStorage.getItem(keyFor(active)) || ''; savedInfo.textContent='Loaded '+active; }
let saveTO; notes.addEventListener('input',()=>{ clearTimeout(saveTO); saveTO=setTimeout(()=>{ localStorage.setItem(keyFor(active), notes.value); savedInfo.textContent='Saved '+new Date().toLocaleTimeString(); },300); });
renderTabs(); loadNote();
</script>
</body>
</html>
